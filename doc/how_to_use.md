# 使い方 / How to use

## 概要

このソフトは、「[春ロボコン2023（関西大会）](https://xn--tck4d2b0a0029dol2bn0r.com/)」における、得点集計アプリケーションとして製作されました。

![起動時の様子](/doc/img/start_up.png "ソフト起動時の様子")

## ダウンロード方法

1. [Releaseページ](https://github.com/Kansai-SpringRobocon/harurobo2023-points-count/releases)にアクセス。
2. 最新版の「Assets」の中の「harurobo-timer.zip」をクリック。
3. ダウンロードされたzipファイルを解凍する。

### 注意事項

- 下記画像の様に、Chromeでダウンロード時にエラーを吐く場合がある。

![ダウンロードエラー](/doc/img/download_error.png "ダウンロードエラー")

- 「送信」し、スキャン途中に「開く」をクリックすると、ダウンロードされたものが開ける。
- もしくは、[Chrome にソフトウェアのダウンロードがブロックされた。でもダウンロードしたい。(Ksanland)](https://ksanhonsan.com/chrome-warning-notdownload/#toc4) の対処を行う

![ダウンロード開く](/doc/img/download_open.png "ダウンロード開く")

## 動作環境

Windows10 以降

## ファイル構成

- `main.exe`をダブルクリックすることによって起動する。
- `/img/`にソフトウェア上で表示されるフィールドやロゴ等の画像ファイルが存在する。
- `/setting/`にチーム名・フィールドエリア等の設定ファイルが存在する。（json形式）
- `/sound/`にタイマーに使用されている効果音ファイルが存在する。
  - 音源：効果音ラボ 様 https://soundeffect-lab.info/

~~~bash
main.exe # 動作ファイル
│
├─img
│      field.png
│      harurobo.ico
│      kansai-harurobo.png
│
├─setting
│      area_state.json # フィールドエリア情報
│      team.json # チーム名
│
└─sound
        count_down.mp3 # カウントダウン時 音声
        end.mp3 # タイマー終了時 音声
        start.mp3 # タイマー開始時 音声
~~~

## 操作画面について

操作画面は、下記のエリアに分けることができる。

- チーム名 選択エリア
- チーム得点 表示エリア
- ログ 表示エリア
- フィールド状態 操作エリア
- タイマー 表示エリア
- タイマー 操作エリア
- 試合進行 操作エリア
- アプリケーション 操作エリア

![操作エリア](/doc/img/area.png "操作エリア")

## 操作の流れ

1. アプリケーション起動（main.exeをダブルクリック）
2. [チーム名選択](https://github.com/Kansai-SpringRobocon/harurobo2023-points-count/blob/master/doc/how_to_use.md#チーム名選択)
3. [セッティングタイム1](https://github.com/Kansai-SpringRobocon/harurobo2023-points-count/blob/master/doc/how_to_use.md#セッティングタイム1)
4. [陳列タイム](https://github.com/Kansai-SpringRobocon/harurobo2023-points-count/blob/master/doc/how_to_use.md#陳列タイム)
5. [セッティングタイム2](https://github.com/Kansai-SpringRobocon/harurobo2023-points-count/blob/master/doc/how_to_use.md#セッティングタイム2)
6. [販売タイム](https://github.com/Kansai-SpringRobocon/harurobo2023-points-count/blob/master/doc/how_to_use.md#販売タイム)
7. （2. へ戻る）

### 注意

アプリケーション起動時にWindows Defenderによって、下記画像の様なエラーが出る場合がある。「詳細情報」->「実行」と選択することで実行できる。

![WindowsDefender1](/doc/img/windows_defender.png)
![WindowsDefender2](/doc/img/windows_defender2.png)

## アプリケーション操作

「`リセット`」ボタンを押すと、すべての状態がリセットされる。（ボタンの選択色が緑色→白色に、得点0点に）

「`閉じる`」ボタンを押すと、アプリケーションが終了する。

## タイマー操作

「`開始`」ボタンを押すと、タイマーが5秒のカウントダウン（音声あり）の後、開始する。終了時にも音声が鳴る。

開始後、「`一時停止`」ボタンが現われる。このボタンを押すとタイマーが一時停止する。

「`リセット`」ボタンを押すと、タイマーがリセットされる。

|種類|時間|
|--|--|
|セッティングタイム1|1分|
|陳列タイム|1分30秒|
|セッティングタイム2|1分|
|販売タイム|1分30秒|

![タイマーボタンの挙動](/doc/img/timer.png)
セッティングタイム時における、タイマーの挙動（左：開始前、真ん中：カウントダウン中、右：タイマー動作中）

## 試合の流れ

### チーム名選択

1. 「`チーム名 選択エリア`」のプルダウンより、チーム名の選択を行う。
   - チーム名の情報は、`/setting/team.json`に記述されている。
2. 選択を行うと、「`チーム得点 表示エリア`」に反映される。

![チーム選択の例](/doc/img/team_name.png)

### セッティングタイム1

1. 「`試合進行操作エリア`」の「`セッティングタイム1`」ボタンを押す。
   - 選択すると、 ボタンが緑色になる
   - 「`タイマー表示エリア`」に
     - 「`セッティングタイム1`」と表示される
     - 「01:00」と表示される（セッティングタイムの時間長さ）
   - 「`フィールド状態操作エリア`」に「`陳列タイム`」で操作するボタンが表示される
   - 「`タイマー表示エリア`」に「」
2. 「`タイマー操作エリア`」の「`開始`」ボタンを押す。
   - 5, 4, ..., 1, START!とカウントダウンが進む
   - もしも問題が起きた場合は「`一時停止`」を押すとタイマーを止めることができる
3. 1分 経過後に音声が鳴り、「`タイマー表示エリア`」に「`Finish!`」と表示される。

![セッティングタイム1](/doc/img/setting1.png)

### 陳列タイム

1. 「`試合進行操作エリア`」の「`陳列タイム`」ボタンを押す。
   - 選択すると、ボタンが緑色になる
   - 「`タイマー表示エリア`」に
     - 「`陳列タイム`」と表示される
     - 「01:30」と表示される（陳列タイムの最大時間長さ）
   - 「`フィールド状態操作エリア`」に「`陳列タイム`」で操作するボタンが表示される
2. 「`タイマー操作エリア`」の「`開始`」ボタンを押す。
   - 5, 4, ..., 1, START!とカウントダウンが進む
   - もしも問題が起きた場合は「`一時停止`」を押すとタイマーを止めることができる
3. 「`フィールド状態操作エリア`」のボタンを、フィールドの状態に合わせて操作する。
   - それぞれのボタンは、存在する（緑色）/ 存在しない（白色）の2種類の状態がある
      - 初期状態はすべての陳列棚で「存在しない（白色）」状態
   - 「`ワーク取得`」：ワークが初めて、集荷室から取得された場合に押す
   - 「`剣`」「`ハット`」：「該当するワーク」が該当する「陳列棚」に置かれた時に押す
4. 陳列タイムを終了する（「`剣`」もしくは「`ハット`」が合計6箇所の陳列棚に置かれた場合）条件を満たしたら、<br>「`タイマー表示エリア`」に、「`陳列タイム終了`」と「`試合開始からの経過時間`」が表示される。
5. 1分30秒 経過後に音声が鳴り、「`タイマー表示エリア`」に「`Finish!`」と表示される。

![陳列タイム](/doc/img/display_time.png)

### セッティングタイム2

1. 「`試合進行操作エリア`」の「`セッティングタイム2`」ボタンを押す。
   - 選択すると、 ボタンが緑色になる
   - 「`タイマー表示エリア`」に
     - 「`セッティングタイム2`」と表示される
     - 「01:00」と表示される（セッティングタイムの時間長さ）
   - 「`フィールド状態操作エリア`」に「`セッティングタイム2`」で操作するボタンが表示される
2. 「`タイマー操作エリア`」の「`開始`」ボタンを押す。
   - 5, 4, ..., 1, START!とカウントダウンが進む
   - もしも問題が起きた場合は「`一時停止`」を押すとタイマーを止めることができる
3. 「`フィールド状態操作エリア`」のボタンを、フィールドの状態に合わせて操作する。
   - それぞれのボタンは、存在する（緑色）/ 存在しない（白色）の2種類の状態がある
      - 初期状態はすべての陳列棚で「存在しない（白色）」状態
   - 「`剣`」「`ハット`」：「該当するワーク」が該当する「陳列棚」に置かれた時に押す
   - 「倉庫」の数字：倉庫に置かれたワークの個数に合わせて＋/－する
4. 1分 経過後に音声が鳴り、「`タイマー表示エリア`」に「`Finish!`」と表示される。

上記3.の操作を行うことで、後の「`陳列タイム`」の「`集荷室`」に置く最大数を定義することができる。

![セッティングタイム2](/doc/img/setting2.png)

### 販売タイム

1. 「`試合進行操作エリア`」の「`販売タイム`」ボタンを押す。
   - 選択すると、ボタンが緑色になる
   - 「`タイマー表示エリア`」に
     - 「`販売タイム`」と表示される
     - 「01:30」と表示される（販売タイムの最大時間長さ）
2. 「`タイマー操作エリア`」の「`開始`」ボタンを押す。
   - 5, 4, ..., 1, START!とカウントダウンが進む
   - もしも問題が起きた場合は「`一時停止`」を押すとタイマーを止めることができる
3. 「`フィールド状態操作エリア`」のボタンを、フィールドの状態に合わせて操作する。
   - 「集荷室」の数字：集荷室に置かれたワークの個数に合わせて＋/－する
     - 最大値になると、数字背景が緑色になりそれ以上の値にできない。
       - 最大値は「セッティングタイム2」で配置されたワークの個数
   - 「`完売達成`」：チームが「完売達成」を宣言したときに押す
4. 「`完売達成`」した場合、「`タイマー表示エリア`」に、「`完売達成`」と「`試合開始からの経過時間`」が表示される。
5. 1分30秒 経過後に音声が鳴り、「`タイマー表示エリア`」に「`Finish!`」と表示される。

![販売タイム](/doc/img/sale_time.png)
